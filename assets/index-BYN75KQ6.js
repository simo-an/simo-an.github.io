import{_ as R,a as K,b as G,c as J,g as Q,s as X,d as F,u as Y,e as U}from"./useCustomerStore-BebWUzos.js";import{d as h,g as Z,h as tt,r as p,o as a,c as f,f as n,w as c,i as g,u as m,s as I,j as H,k as et,a as u,t as k,l as nt,m as ot,n as st,p as y,q as b,v as at,x as N,y as it,z as w,A as S,B as C,C as V,D as lt,E as ut,F as E,G as M,H as rt,I as ct,_ as dt,J as pt,K as _t,L as mt,M as z}from"./index-Cce2jk5E.js";const vt={id:"product-category"},yt=h({__name:"ProductCategory",setup(r){const t=Z().map(e=>({label:e.name,key:e.id,children:tt(e.id).map(s=>({label:s.name,key:s.id}))})),o=[];function l(e){if(e.length>o.length){const s=e.find(i=>!o.includes(i));s&&et(s)}o.length=0,o.push(...e)}return(e,s)=>{const i=p("n-menu");return a(),f("div",vt,[n(R,null,{default:c(()=>[g("产品目录")]),_:1}),n(i,{class:"category-menu",options:m(t),indent:24,rootIndent:16,defaultValue:m(I),value:m(I),"onUpdate:value":m(H),"onUpdate:expandedKeys":l},null,8,["options","defaultValue","value","onUpdate:value"])])}}}),ft={id:"contactus-simplify"},ht={class:"item company-location"},gt={class:"item company-email"},$t={class:"item company-phone"},kt=h({__name:"ContactUsSimplify",setup(r){return(t,o)=>(a(),f("div",ft,[n(R,{route:"/contact"},{default:c(()=>[g("联系我们")]),_:1}),u("div",ht,[n(K),u("p",null,k(m(nt)),1)]),u("div",gt,[n(G),u("p",null,k(m(ot)),1)]),u("div",$t,[n(J),u("p",null,k(m(st)),1)])]))}}),It=h({__name:"HoveredImage",props:{url:{}},setup(r){return(t,o)=>{const l=p("n-image");return a(),y(l,{class:"hovered-image",width:"400",objectFit:"cover",src:t.url,alt:""},null,8,["src"])}}}),q=b(new Set);bt();function bt(){const r=Q("InquiryList");Array.isArray(r)&&(q.value=new Set(r))}function qt(){X("InquiryList",q.value)}function Lt(r){q.value.add(r)}function Ct(r){q.value.delete(r)}at(q,()=>{qt()},{deep:!0});const A=h({__name:"InquiryContent",props:{productList:{},closable:{type:Boolean}},emits:["finished","close"],setup(r,{emit:t}){const o=r,l=t,e=b(null);function s(){return o.productList.map((_,d)=>`      ${d+1}. ${_.title.trim()};`).join(`
`)}const i=b({name:F.name,email:F.email,content:`Hello,
    I'm interested in the following products:

${s()}

    Can you give me a reasonable price?
    Waiting for you replay.

thanks.`}),v={name:{required:!0,trigger:["blur","input"],message:"请输入您的名字"},email:{required:!0,trigger:["blur","input"],message:"请输入您的邮箱"}};function $(){e.value&&e.value.validate(_=>{_||(Y(i.value.name,i.value.email),l("finished"))})}return(_,d)=>{const x=p("NEllipsis"),L=p("n-input"),B=p("n-form-item"),j=p("n-form"),O=p("NButton"),W=p("n-card");return a(),y(W,{id:"inquiry-content",size:"huge",role:"dialog",closable:_.closable,onClose:d[3]||(d[3]=P=>l("close"))},{header:c(()=>[n(x,null,{default:c(()=>[g("发送询价")]),_:1})]),footer:c(()=>[n(O,{type:"primary",onClick:$,size:"large"},{default:c(()=>[g("立即询价")]),_:1})]),default:c(()=>[n(j,{ref_key:"inquiryForm",ref:e,model:i.value,rules:v,labelPlacement:"left",labelWidth:"auto",requireMarkPlacement:"right-hanging",size:"large"},{default:c(()=>[n(B,{label:"您的名字",path:"name"},{default:c(()=>[n(L,{value:i.value.name,"onUpdate:value":d[0]||(d[0]=P=>i.value.name=P),placeholder:"您的名字"},null,8,["value"])]),_:1}),n(B,{label:"您的邮件",path:"email"},{default:c(()=>[n(L,{value:i.value.email,"onUpdate:value":d[1]||(d[1]=P=>i.value.email=P),placeholder:"您的邮件"},null,8,["value"])]),_:1}),n(B,{label:"附加内容",path:"content"},{default:c(()=>[n(L,{value:i.value.content,"onUpdate:value":d[2]||(d[2]=P=>i.value.content=P),type:"textarea",rows:"10",placeholder:"附加内容"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["closable"])}}}),D=h({__name:"ProductAction",props:{product:{}},setup(r){const t=U(),o=r,l=N(()=>q.value.has(o.product.id)),e=b(!1);function s(){const{id:$,title:_}=o.product;Lt($),t.success({title:"加入成功",content:_,duration:2e3})}function i(){const{title:$}=o.product;t.success({title:"询价发送成功",content:$,duration:2e3}),e.value=!0}const v=b(!1);return($,_)=>{const d=p("NButton"),x=p("NModal");return a(),f("div",{class:"product-action",onClick:_[4]||(_[4]=it(()=>{},["stop"]))},[l.value?(a(),y(d,{key:0,secondary:"",type:"success",onClick:_[0]||(_[0]=L=>m(Ct)($.product.id))},{default:c(()=>[g("已加询价单")]),_:1})):(a(),y(d,{key:1,ghost:"",type:"primary",onClick:s},{default:c(()=>[g("加入询价单")]),_:1})),n(d,{type:"primary",onClick:_[1]||(_[1]=L=>v.value=!0)},{default:c(()=>[g("直接询价")]),_:1}),n(x,{show:v.value,"onUpdate:show":_[3]||(_[3]=L=>v.value=L),closeOnEsc:e.value,maskClosable:e.value},{default:c(()=>[n(A,{productList:[$.product],closable:"",onClose:_[2]||(_[2]=L=>v.value=!1),onFinished:i},null,8,["productList"])]),_:1},8,["show","closeOnEsc","maskClosable"])])}}}),wt={key:0,class:"product-details"},Nt={class:"product-info"},Pt={class:"info"},Et=["title"],xt={class:"product-desc"},Bt=u("div",{class:"title"},"商品详情",-1),Mt=["innerHTML"],Ft=h({__name:"ProductDetails",setup(r){const t=N(()=>S(C.value));return(o,l)=>{const e=p("NEllipsis");return t.value?(a(),f("div",wt,[u("div",Nt,[n(It,{url:t.value.thumbnail},null,8,["url"]),u("div",Pt,[n(e,{class:"title"},{default:c(()=>[g(k(t.value.title),1)]),_:1}),u("p",{class:"details",title:t.value.details},k(t.value.details),9,Et),n(D,{product:t.value},null,8,["product"])])]),u("div",xt,[Bt,u("section",{innerHTML:t.value.details},null,8,Mt)])])):w("",!0)}}}),zt=["src"],Rt={class:"product-info"},Ut=["title"],T=h({__name:"ProductItem",props:{product:{}},setup(r){return(t,o)=>{const l=p("NEllipsis");return a(),f("div",{class:"product-item",onClick:o[0]||(o[0]=e=>m(V)(t.product.id))},[u("img",{class:"thumbnail",src:t.product.thumbnail,alt:""},null,8,zt),u("div",Rt,[n(l,{class:"title"},{default:c(()=>[g(k(t.product.title),1)]),_:1}),u("p",{class:"details",title:t.product.details},k(t.product.details),9,Ut),n(D,{product:t.product},null,8,["product"])])])}}}),Ht=h({__name:"EmptyProductList",setup(r){return(t,o)=>{const l=p("n-button"),e=p("n-empty");return a(),y(e,{description:"未发现产品"},{icon:c(()=>[]),extra:c(()=>[n(l,{ghost:"",type:"primary",onClick:o[0]||(o[0]=s=>m(H)())},{default:c(()=>[g(" 看看店铺热销产品 ")]),_:1})]),_:1})}}}),St={id:"product-list"},Vt={class:"category-title"},At=h({__name:"ProductList",setup(r){const t=b([]),o=N(()=>rt(I.value));return lt(()=>{t.value=ut(I.value)}),(l,e)=>{const s=p("n-divider");return a(),f("div",St,[u("div",Vt,k(o.value&&o.value.name),1),n(s),t.value.length>0?(a(!0),f(E,{key:0},M(t.value,i=>(a(),y(T,{key:i.id,product:i},null,8,["product"]))),128)):(a(),y(Ht,{key:1}))])}}}),Dt={id:"hot-product"},Tt=u("div",{class:"category-title"},"热销产品",-1),jt=h({__name:"HotProductList",setup(r){const t=N(()=>ct());return(o,l)=>{const e=p("n-divider");return a(),f("div",Dt,[Tt,n(e),(a(!0),f(E,null,M(t.value,s=>(a(),y(T,{key:s.id,product:s},null,8,["product"]))),128))])}}}),Ot=u("path",{d:"M704 932.9c-9.9 0-19.1-3.8-26.1-10.8l-384-384c-14.4-14.4-14.4-37.8 0-52.2l384-384c7-7 16.2-10.8 26.1-10.8 9.9 0 19.1 3.8 26.1 10.8 7 7 10.8 16.2 10.8 26.1s-3.8 19.1-10.8 26.1L372.2 512l357.9 357.9c7 7 10.8 16.2 10.8 26.1s-3.8 19.1-10.8 26.1c-7 7-16.2 10.8-26.1 10.8z","p-id":"2731"},null,-1),Wt=h({__name:"IconArrowLeft",props:{size:{},color:{},transparent:{type:Boolean}},setup(r){const t=r;return(o,l)=>(a(),y(dt,{pid:"2730",shape:t},{default:c(()=>[g("> "),Ot]),_:1},8,["shape"]))}}),Kt=["src"],Gt={class:"product-info"},Jt=["title"],Qt=h({__name:"InquiryItem",props:{product:{}},setup(r){return(t,o)=>{const l=p("NEllipsis");return a(),f("div",{class:"inquiry-item",onClick:o[0]||(o[0]=e=>m(V)(t.product.id))},[u("img",{class:"thumbnail",src:t.product.thumbnail,alt:""},null,8,Kt),u("div",Gt,[n(l,{class:"title"},{default:c(()=>[g(k(t.product.title),1)]),_:1}),u("p",{class:"details",title:t.product.details},k(t.product.details),9,Jt)])])}}}),Xt={id:"inquiry-list"},Yt=h({__name:"InquiryList",setup(r){const t=U(),o=N(()=>Array.from(q.value).map(i=>S(i))),l=b(!1),e=b(!1);function s(){t.success({title:"询价发送成功",duration:2e3}),e.value=!0}return(i,v)=>{const $=p("NButton"),_=p("NModal");return a(),f(E,null,[u("div",Xt,[(a(!0),f(E,null,M(o.value,d=>(a(),y(Qt,{key:d.id,product:d},null,8,["product"]))),128))]),n($,{type:"primary",size:"large",onClick:v[0]||(v[0]=d=>l.value=!0)},{default:c(()=>[g("发送询价")]),_:1}),n(_,{show:l.value,"onUpdate:show":v[2]||(v[2]=d=>l.value=d),closeOnEsc:e.value,maskClosable:e.value},{default:c(()=>[n(A,{productList:o.value,closable:"",onClose:v[1]||(v[1]=d=>l.value=!1),onFinished:s},null,8,["productList"])]),_:1},8,["show","closeOnEsc","maskClosable"])],64)}}}),Zt={key:0,class:"title"},te=u("div",null,null,-1),ee={key:0,class:"inquiry-content"},ne=h({__name:"InquiryListEntry",setup(r){const t=b(!0),o=N(()=>t.value?`${Math.max(window.innerHeight-500,600)}px`:"50px"),l=N(()=>t.value?`${Math.max(window.innerWidth/6,320)}px`:"50px");return(e,s)=>{const i=p("n-badge");return a(),f("div",{id:"inquiry-list-entry",style:_t({height:o.value,width:l.value})},[u("header",null,[n(i,{show:!t.value,value:m(q).size,max:99},null,8,["show","value"]),u("div",{class:"expand-tool",onClick:s[0]||(s[0]=v=>t.value=!t.value)},[t.value?(a(),y(pt,{key:0})):(a(),y(Wt,{key:1}))]),t.value?(a(),f("div",Zt,"询价单")):w("",!0),te]),t.value?(a(),f("div",ee,[n(Yt)])):w("",!0)],4)}}}),oe={id:"view-products"},se={class:"side-menu"},ae={class:"product-content"},ue=h({__name:"index",setup(r){function t(e){e||(e=z.currentRoute.value);const s=e.query;return{categoryId:s.category,productId:s.product}}mt((e,s,i)=>{const v=l(t(e));return v?i(v):i()});const o=l(t());o&&z.push(o);function l(e){if(!e.categoryId&&!e.productId&&(C.value||I.value)){const s={category:I.value,product:C.value};return s.category||Reflect.deleteProperty(s,"category"),s.product||Reflect.deleteProperty(s,"product"),{path:"/products",query:s}}return I.value=e.categoryId,C.value=e.productId,null}return(e,s)=>{const i=p("n-divider");return a(),f("div",oe,[u("div",se,[n(yt),n(i),n(kt)]),n(i,{vertical:""}),u("div",ae,[m(C)?(a(),y(Ft,{key:0})):w("",!0),m(I)&&!m(C)?(a(),y(At,{key:1})):w("",!0),!m(I)&&!m(C)?(a(),y(jt,{key:2,hideTitle:""})):w("",!0)]),m(q).size>0?(a(),y(ne,{key:0})):w("",!0)])}}});export{ue as default};
